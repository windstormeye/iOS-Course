---
title: More-iOSå›½é™…åŒ–ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ
date: 2018-04-10 21:10:40
tags:
- iOS
- å›½é™…åŒ–
---

å…³äºiOSå¼€å‘ä¸­çš„å›½é™…åŒ–ï¼ˆä¹Ÿå¯ç§°ä¸ºå¤šè¯­è¨€ï¼‰åœ¨ç½‘ä¸Šçš„æ–‡ç« å¤šå¦‚ç‰›æ¯›ï¼Œä¸è¿‡æ€»ç»“èµ·æ¥å°±é‚£ä¹ˆä¸€å›äº‹ï¼Œä¸æ˜¯è¯´ä»–ä»¬å†™çš„ä¸å¥½æˆ‘å†™çš„å¤šå¥½ï¼Œè€Œæ˜¯è¯´è¿‡äºé›¶æ•£ã€‚

ç°åœ¨ï¼Œæˆ‘å°†ç»“åˆå®é™…åœºæ™¯éœ€æ±‚è¿›è¡Œå›½é™…åŒ–åšæ³•è¯¦è§£ã€‚å¯ä»¥è‚¯å®šçš„æ˜¯ï¼ŒAndroidçš„å›½é™…åŒ–åšæ³•å¤§åŒå°å¼‚ï¼Œæ— éä¹Ÿå°±æ˜¯å„ä¸ªè¯­è¨€ç‰ˆæœ¬çš„æ–‡ä»¶æ›¿æ¢ï¼Œæˆ‘ä»¬å…ˆæ¥åˆ†æä¸‹çœŸå®çš„éœ€æ±‚æ˜¯æ€ä¹ˆä¸€å›äº‹ã€‚

## å›½é™…åŒ–éœ€æ±‚ï¼š
1. åªæä¾›Englishå’ŒChinese Simplifiedä¸¤ç§è¯­è¨€ï¼›
2. Appåç§°è·Ÿéšç³»ç»Ÿè¯­è¨€å˜åŒ–ï¼›
2. ç”¨æˆ·é¦–æ¬¡æ‰“å¼€appæ—¶ï¼Œappçš„è¯­è¨€ä¸ç³»ç»Ÿè¯­è¨€ä¿æŒä¸€è‡´ï¼ˆç³»ç»Ÿè¯­è¨€ä¸ºéç®€ä½“ä¸­æ–‡ï¼Œé»˜è®¤appéƒ½æ˜¯è‹±æ–‡ï¼‰ç”¨æˆ·æ‰‹åŠ¨æ›´æ”¹è¯­è¨€ä¹‹åï¼Œä¹‹åéƒ½è®°å¿†ç”¨æˆ·é€‰æ‹©çš„è¯­è¨€ï¼›
3. ç”¨æˆ·åœ¨Appå†…åˆ‡æ¢è¯­è¨€åï¼ŒAppæœ¬èº«æ‰€æœ‰æ–‡æœ¬ä¿¡æ¯å…¨éƒ¨æ›¿æ¢æˆå¯¹åº”è¯­è¨€ã€‚

æ ¹æ®éœ€æ±‚ï¼Œæˆ‘æ¯”è¾ƒçº ç»“çš„åœ°æ–¹æ˜¯ï¼ŒAppçš„é™æ€æ–‡æœ¬æ•°æ®å¯ä»¥å­˜ä¸¤ä»½åœ¨æœ¬åœ°ï¼Œä¹Ÿå°±æ˜¯Englishä¸€ä»½Chinese Simplifiedä¸€ä»½ï¼Œä½†è¯·æ±‚çš„APIæ˜¯åŒæ—¶è¿”å›ä¸¤ä»½ä¸­è‹±æ–‡æ•°æ®oråˆ†ä¸­è‹±æ–‡ä¸¤ä¸ªæ¥å£ï¼Ÿå¦‚æœæ˜¯è¦ä¸€ä¸ªæ¥å£åŒæ—¶è¿”å›äº†ä¸­è‹±æ–‡ä¸¤ä»½æ•°æ®ï¼Œæ˜¾ç„¶ä¼šåŠ å¤§æ•°æ®åŒ…çš„å¤§å°ï¼Œå…¶æ¬¡ç”¨æˆ·å¾ˆæœ‰å¯èƒ½ä»å®‰è£…Appçš„é‚£å¤©å¼€å§‹å°±ä¸å†åˆ‡æ¢Appè¯­è¨€ï¼Œç”šè‡³å¹³å‡å‡ ä¸ªæ˜ŸæœŸæ‰æ¢ä¸€æ¬¡ï¼ŒåŒæ—¶è¿”å›ä¸¤ä»½æ•°æ®æ˜¯å¦å¤šä½™ï¼Œä½†æ˜¯è¿™ä¹ˆåšå‡ ä¹å¯ä»¥è¾¾åˆ°â€œæ— æ„ŸçŸ¥â€æ•°æ®æºåˆ‡æ¢ï¼Œç›¸å½“äºæ˜¯è¯´ï¼Œä¸€æ—¦ç”¨æˆ·é€‰æ‹©å¥½äº†è¦åˆ‡æ¢è¯­è¨€ï¼Œâ€œå•ªå—’â€ç‚¹äº†å®Œæˆï¼Œç«‹é©¬popæ‰å½“å‰é¡µé¢ï¼Œç„¶åæ•´ä¸ªAppçš„æ•°æ®æºä¸­è‹±æ–‡åˆ‡æ¢å¯ä»¥å‡ ä¹ç”¨â€œç¬é—´å®Œæˆâ€æ¥å½¢å®¹ã€‚

å¦‚æœæ˜¯åˆ†ä¸­è‹±æ–‡ä¸¤ä¸ªæ¥å£ï¼Œå®é™…ä¸Šå°±ä¼šå‡ºç°å¾®ä¿¡åœ¨è¿›è¡Œè¯­è¨€åˆ‡æ¢æ—¶çš„loadingèŠèŠ±ï¼Œå› ä¸ºè¦é‡æ–°æ‹‰å–è‹±æ–‡ç‰ˆæ•°æ®ï¼Œä¸è¿‡å¥½å¤„æ˜¯å¯ä»¥å‡å°‘ä¸Šä¸€ç§åšæ³•çš„æ•°æ®åŒ…æ•´ä½“å¤§å°ã€‚è¿™ä¸¤ç§åšæ³•æˆ‘éƒ½æœ‰å®è·µè¿‡ï¼Œå¦‚æœä½ çš„Appæ˜¯éå¸¸å›ºå®šï¼Œä¸ä¼šé¢‘ç¹å‡ºç°è¯­è¨€åˆ‡æ¢çš„éœ€æ±‚ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ç¬¬äºŒç§ï¼›å¦‚æœAppæœ‰ä¸€å¤©ä¹‹å†…å¯èƒ½ä¼šé¢‘ç¹åˆ‡æ¢å¤šæ¬¡è¯­è¨€çš„æƒ…å†µï¼Œç¬¬ä¸€ç§æ— ç–‘ã€‚

ç»è¿‡ä¸€ç•ªæ¢è®¨ï¼Œè™½ç„¶è¦ä¾›ç»™æ‹‰ç¾ã€åŒ—ç¾å’Œæ¬§æ´²çš„åŒå­¦ä½¿ç”¨ï¼Œä½†æ˜¯ä¸ä¼šå‡ºç°é¢‘ç¹åˆ‡æ¢è¯­è¨€çš„æƒ…å†µï¼Œæ‰€ä»¥ï¼Œæœ€ç»ˆæˆ‘ä»¬é€‰æ‹©äº†ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆã€‚å…ˆæ¥çœ‹ä¸€å¼ æœ€ç»ˆæˆæœgifå›¾ï¼Œ

<img src="https://i.loli.net/2018/04/10/5accbf4011d4d.gif" width = "40%" height = "40%" align=center />


ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°å…¶å®å¹¶æ²¡æœ‰å¯¹æ•°æ®æºè¿›è¡Œåˆ‡æ¢ï¼Œå› ä¸ºã€‚ã€‚ã€‚ã€‚åå°æ²¡å†™å®ŒğŸ˜“ã€‚

ä¸è¿‡ä¹Ÿä¸å½±å“æˆ‘ä»¬çš„è®²è§£ï¼Œé¦–å…ˆï¼Œæ˜ç¡®ä¸€ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬èƒ½å¤Ÿåšçš„å›½é™…åŒ–è¯­è¨€æ”¯æŒiOSç³»ç»Ÿä¸­è‡ªå¸¦çš„æ‰€æœ‰è¯­è¨€ï¼Œåªè¦ä½ èƒ½åœ¨ç³»ç»Ÿè®¾ç½®ä¸­æ‰¾åˆ°çš„è¯­è¨€ï¼Œå°±èƒ½å¤Ÿå¯¹ä½ çš„Appåšå¯¹åº”ç‰ˆæœ¬çš„å›½é™…åŒ–é€‚é…ï¼›å…¶æ¬¡ï¼Œæ¯å¯¹Appé€‚é…ä¸€ç§è¯­è¨€ï¼Œå°±è¦å•åˆ›å»ºå‡ºä¸€ä¸ªè¯­è¨€æ–‡ä»¶ï¼ˆè¦ä¸ç„¶ä¼šå¼•èµ·å†²çªï¼‰ã€‚OKï¼Œæˆ‘ä»¬æ­£å¼è¿›å…¥è®²è§£ã€‚


### é¦–å…ˆåˆ›å»ºä¸€ä¸ªå·¥ç¨‹
æˆ‘èµ·åä¸º`languageTest`ã€‚


### å·¥ç¨‹åˆå§‹åŒ–
```objc
// AppDelegate.m

#import "navOneViewController.h"
#import "navTwoViewController.h"

@interface AppDelegate ()

@property (nonatomic, strong) UITabBarController *rootTabBar;

@end

@implementation AppDelegate


- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    self.window = [[UIWindow alloc]initWithFrame:[UIScreen mainScreen].bounds];
    self.rootTabBar = [[UITabBarController alloc]init];
    self.rootTabBar.delegate = (id)self;
    self.window.rootViewController = self.rootTabBar;
    [[UITabBar appearance] setBarTintColor:[UIColor whiteColor]];

    navOneViewController *navOneController = [navOneViewController new];
    UINavigationController *nav1 = [[UINavigationController alloc] initWithRootViewController:navOneController];
    nav1.title = @"é¦–é¡µ";

    navTwoViewController *navTwoController = [navTwoViewController new];
    UINavigationController *nav2 = [[UINavigationController alloc] initWithRootViewController:navTwoController];
    nav2.title = @"å‘ç°";

    self.rootTabBar.viewControllers = @[nav1, nav2];

    [self.window makeKeyAndVisible];

    return YES;
}

```

åœ¨`Appdelegate`ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå…·å¤‡åŸºæœ¬å±•ç¤ºåŠŸèƒ½çš„tabBaråŠæŒ‚è½½åœ¨å…¶ä¹‹ä¸Šçš„VCï¼Œ

```objc
// navOneViewController.m

- (void)viewDidLoad {
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor blueColor];

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(100, 100, 200, 20)];
    [self.view addSubview:label];
    label.font = [UIFont systemFontOfSize:25];
    label.textColor = [UIColor whiteColor];
    label.text = @"è¿™æ˜¯é¦–é¡µ";

}


// navTwoViewController.m

- (void)viewDidLoad {
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor orangeColor];

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(100, 100, 200, 20)];
    [self.view addSubview:label];
    label.font = [UIFont systemFontOfSize:25];
    label.textColor = [UIColor whiteColor];
    label.text = @"è¿™æ˜¯å‘ç°";

    UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(100, 300, 100, 100)];
    [self.view addSubview:button];
    [button addTarget:self action:@selector(buttonClick) forControlEvents:UIControlEventTouchUpInside];
    button.backgroundColor = [UIColor blueColor];
    [button setTitle:@"æ”¹å˜è¯­è¨€" forState:UIControlStateNormal];

}

- (void)buttonClick {

}

```

åœ¨å„è‡ªå¯¹åº”çš„VCä¸­å†™ä¸‹ç›¸å…³UIï¼Œå¹¶é¢„ç•™ç›¸å…³Buttonç‚¹å‡»äº‹ä»¶å³å¯ã€‚


### åˆ›å»ºè¯­è¨€æ–‡ä»¶

åˆ›å»ºè·¯å¾„ï¼š file -> new -> file... -> String Fileï¼Œæ–‡ä»¶åä¸¥æ ¼å‘½åä¸ºâ€”â€”â€œLocalizableâ€ï¼Œåˆ›å»ºå¥½è¯¥æ–‡ä»¶åï¼Œç‚¹å‡»è¯¥æ–‡ä»¶ï¼Œå¹¶æ‰“å¼€Xcodeçš„å³è¾¹åŠŸèƒ½åŒºï¼ˆä¸çŸ¥é“åº”è¯¥å«å•¥ï¼‰ï¼Œåœ¨LocalizationåŠŸèƒ½åŒºå‹¾é€‰è¯­è¨€ç‰ˆæœ¬ï¼Œå¦‚æœæ­¤æ—¶ä½ å¹¶æœªçœ‹åˆ°æˆ–è€…åªæœ‰Englishå¯é€‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ°PROJECT -> info -> Localizationï¼Œæ·»åŠ éœ€è¦çš„è¯­è¨€ã€‚

æ·»åŠ å®Œæˆåï¼Œä¼šåœ¨ä¹‹å‰åˆ›å»ºçš„Localization.stringæ–‡ä»¶ä¸‹çœ‹åˆ°å¤šå‡ºæ¥çš„è¯­è¨€æ–‡ä»¶ï¼Œæˆ‘é€‰æ‹©äº†Englishå’ŒChinese Simplifiedã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥åœ¨å¯¹åº”ç”Ÿæˆçš„è¯­è¨€æ–‡ä»¶ä¸­è¿›è¡Œéœ€è¦å¤šè¯­è¨€æ›¿æ¢çš„å­—æ®µç¼–å†™äº†ã€‚

```objc
// Localizable.string/Englishæ–‡ä»¶

"home" = "home";
"homeString" = "I'm home";

"discover" = "discover";
"discoverString" = "I'm discover";

"change" = "change";

// Localizable.string/Chinese(Simplified)æ–‡ä»¶

"home" = "é¦–é¡µ";
"homeString" = "æˆ‘æ˜¯é¦–é¡µ";

"discover" = "å‘ç°";
"discoverString" = "æˆ‘æ˜¯å‘ç°";

"change" = "æ”¹å˜è¯­è¨€";
```


å¹¶æ–°å»ºä¸€ä¸ªpchæ–‡ä»¶ï¼Œpchæ–‡ä»¶åŒæ ·ä¹Ÿæ˜¯å¤´æ–‡ä»¶ï¼Œä¸è¿‡è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šå¤´æ–‡ä»¶ï¼Œæ˜¯ä¸€ä¸ªé¢„ç¼–è¯‘æ–‡ä»¶ï¼Œä½äºè¯¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œèƒ½å¤Ÿè¢«å…¶ä»–æ‰€æœ‰æºæ–‡ä»¶å…±äº«å’Œè®¿é—®ï¼Œç›¸ä¿¡ä½ ä¹Ÿçœ‹å‡ºæ¥äº†ï¼Œå¦‚æœåœ¨pchæ–‡ä»¶ä¸­å†™äº†å¤§é‡çš„ä¸æ˜¯å¿…é¡»æ–‡ä»¶ï¼Œåˆ™ä¼šå»¶é•¿ç¼–è¯‘æœŸæ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨.pchæ–‡ä»¶ä¸­æ”¾ï¼š
1. å…¨å±€å®ï¼›
2. æ•´ä¸ªå·¥ç¨‹ä¸­éƒ½èƒ½ç”¨ä¸Šçš„å¤´æ–‡ä»¶ï¼›
3. åŠ¨æ€æ›´åŠ å½“å‰Appè¿è¡Œçš„ç¯å¢ƒåˆ‡æ¢ç›¸å…³å®ï¼ˆdebug or releaseï¼‰ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªpchæ–‡ä»¶å»å­˜æ”¾æ¥ä¸‹æ¥è¦åœ¨æ•´ä¸ªå·¥ç¨‹ä¸­éƒ½è¦ç”¨åˆ°çš„åˆ¤æ–­è¯­è¨€ç¯å¢ƒçš„ä¸­è‹±æ–‡å®ã€‚åˆ›å»ºä¸€ä¸ªpchæ–‡ä»¶çš„æ–¹å¼ä¸ºï¼Œfile -> new -> file... -> æœâ€œpchâ€å…³é”®å­—ï¼Œåˆ›å»ºå®ƒã€‚

è¿›å…¥å·¥ç¨‹é…ç½® -> TARGET -> Build Settings -> æœpchå…³é”®è¯ -> åœ¨â€œApple LLVM 9.0 - Languageâ€ä¸‹çš„Prefix Headerä¸­ï¼ŒåŒå‡»è¾“å…¥ä½ çš„.pchæ–‡ä»¶è·¯å¾„ï¼Œæˆ‘å†™çš„æ˜¯`$(SRCROOT)/PrefixHeader.pch`ï¼Œå¡«å†™å®Œæ¯•ï¼Œå›è½¦ï¼Œä¼šçœ‹åˆ°ç”Ÿæˆçš„ç»å¯¹è·¯å¾„ï¼Œç¡®å®špchæ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®ã€‚ä¸€åˆ‡éƒ½æ²¡é—®é¢˜åï¼Œç¼–è¯‘é€šè¿‡å³å¯ã€‚

```
åœ¨pchæ–‡ä»¶ä¸­ï¼Œå†™å…¥ä»¥ä¸‹å®å®šä¹‰ï¼Œ
```objc
#define AppLanguage @"appLanguage"
#define PJLocalString(key) \
[[NSBundle bundleWithPath:[[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%@",[[NSUserDefaults standardUserDefaults] objectForKey:@"appLanguage"]] ofType:@"lproj"]] localizedStringForKey:(key) value:@"" table:nil]
```

é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ª`AppLanguage`å®ï¼Œæ¨èå¤§å®¶çš„å‘½åæ›´åŠ å¤šæ ·åŒ–ä¸€äº›ï¼Œå› ä¸ºOCå¹¶æ²¡æœ‰namespaceï¼Œå¦‚æœæˆ‘ä»¬çš„å‘½åè¿‡äºç®€å•ï¼Œå°±ä¼šå¯¼è‡´å’ŒAppleæœ¬èº«è‡ªå®šä¹‰çš„NSUserDefaultsé»˜è®¤å€¼äº§ç”Ÿå†²çªã€‚

`PJLocalString(key)`è¿™ä¸ªå®â€œå®šä¹‰â€äº†ä¸€ä¸ªæ›´é•¿çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¹Ÿéƒ½æ˜ç¡®äº†ä¸€ä¸ªæ¦‚å¿µï¼Œåœ¨iOSä¸­çš„æ¯ä¸ªå›½é™…åŒ–è¯­è¨€ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°±ä¿å­˜åœ¨Appæ²™ç›’çš„æ ¹ç›®å½•ä¸­ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨æŸä¸ªæ—¶æœºæ›¿æ¢ç³»ç»Ÿæ‰€é‡‡ç”¨çš„è¯­è¨€æ–‡ä»¶å³å¯ï¼Œè€Œ`PJLocalString(key)`è¿™ä¸ªå®æ‰€åšçš„äº‹æƒ…ï¼Œå°±æ˜¯æ›¿æ¢ï¼å…ˆä»NSUserDefaultsä¸­å–å‡ºå¯¹åº”çš„è¯­è¨€keyï¼ˆenè¿˜æ˜¯zh-Hansï¼‰ï¼Œæ ¹æ®è¯­è¨€keyå»ç´¢å¼•åˆ°å¯¹åº”çš„.lprojæ–‡ä»¶ï¼Œæœ€åæŠŠè¦æ›¿æ¢çš„å…³é”®è¯ä¼ å…¥ï¼ŒæŠ›å‡ºæ‰¾åˆ°çš„å¯¹åº”å€¼ï¼ˆæˆ‘è§‰å¾—æ‰¾çš„è¿™ä¸ªè¿‡ç¨‹ç”¨çš„ç»“æ„åº”è¯¥ä¸æ˜¯hashmapï¼ŒçœŸçš„å¾ˆå¿«ã€‚ğŸ˜¨ï¼‰


å¤šè¯­è¨€æ–‡ä»¶æœ‰äº†ï¼Œå®ä¹Ÿæœ‰äº†ï¼Œé‚£æ€ä¹ˆç”¨å‘¢ï¼Ÿä¸¾ä¸ªä¾‹å­ï¼

```objc
- (void)viewDidLoad {
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor blueColor];

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(100, 100, 200, 20)];
    [self.view addSubview:label];
    label.font = [UIFont systemFontOfSize:25];
    label.textColor = [UIColor whiteColor];
    label.text = PJLocalString(@"homeString");

}
```

åªéœ€è¦åœ¨å¤šè¯­è¨€æ–‡å­—çš„åœ°æ–¹è°ƒç”¨`PJLocalString()`å®ï¼Œä¼ å…¥å¯¹åº”keyå³å¯ã€‚ä½†æ˜¯æ­¤æ—¶è¿è¡Œå·¥ç¨‹ï¼Œä¼šå‘ç°å•¥éƒ½æ²¡äº†ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬å¹¶æœªå¯¹NSUserDefaultsä¸­åšå½“å‰è¯­è¨€çš„è®¾ç½®ï¼Œè¿™å°±å¯¼è‡´äº†å–å‡ºçš„å€¼ä¸ºnilã€‚æ‰€ä»¥ï¼Œè¿˜éœ€è¦åœ¨`AppDelegate`æ–‡ä»¶ä¸­è®¾ç½®åˆå§‹è¯­è¨€ï¼Œ
```objc
if(![[NSUserDefaults standardUserDefaults] objectForKey:AppLanguage]){
        [[NSUserDefaults standardUserDefaults] setObject:@"zh-Hans" forKey:AppLanguage];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }
```

è¿™æ ·ï¼Œæˆ‘ä»¬å³å¯å®Œæˆç¬¬ä¸€æ¬¡è¿›å…¥Appæ—¶åˆå§‹åŒ–åŸºç¡€è¯­è¨€ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å®æ—¶æ›´æ”¹å‘¢ï¼Ÿè¿™å°±éœ€è¦ç”¨åˆ°äº†é€šçŸ¥ï¼Œä½¿ç”¨é€šçŸ¥æœºåˆ¶å»ç»™ç›‘å¬è¯­è¨€è®¾ç½®æ”¹å˜çš„ç›‘å¬è€…è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œ

```objc
// ç»™Appdelegate.mæ›´æ–°ä»¥ä¸‹æ–¹æ³•

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    if(![[NSUserDefaults standardUserDefaults] objectForKey:AppLanguage]){
        [[NSUserDefaults standardUserDefaults] setObject:@"zh-Hans" forKey:AppLanguage];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }

    self.window = [[UIWindow alloc]initWithFrame:[UIScreen mainScreen].bounds];
    self.rootTabBar = [[UITabBarController alloc]init];
    self.rootTabBar.delegate = (id)self;
    self.window.rootViewController = self.rootTabBar;
    [[UITabBar appearance] setBarTintColor:[UIColor whiteColor]];

    navOneViewController *navOneController = [navOneViewController new];
    UINavigationController *nav1 = [[UINavigationController alloc] initWithRootViewController:navOneController];
    nav1.title = PJLocalString(@"home");

    navTwoViewController *navTwoController = [navTwoViewController new];
    UINavigationController *nav2 = [[UINavigationController alloc] initWithRootViewController:navTwoController];
    nav2.title = PJLocalString(@"discover");

    self.rootTabBar.viewControllers = @[nav1, nav2];

    // æ–°å¢ç›‘å¬æ–¹æ³•
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(changeLanguage:) name:@"changeLanguage" object:nil];

    [self.window makeKeyAndVisible];

    return YES;
}

- (void)changeLanguage:(NSNotification *)notify {
    self.rootTabBar.viewControllers[0].tabBarItem.title = PJLocalString(@"home");
    self.rootTabBar.viewControllers[1].tabBarItem.title = PJLocalString(@"discover");
}


// navOneViewController.mæ›´æ–°ä»¥ä¸‹æ–¹æ³•

- (void)viewDidLoad {
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor blueColor];

    UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(100, 100, 200, 20)];
    [self.view addSubview:label];
    label.font = [UIFont systemFontOfSize:25];
    label.textColor = [UIColor whiteColor];
    label.text = PJLocalString(@"homeString");

    // æ–°å¢ç›‘å¬æ–¹æ³•
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(changeLanguage:) name:@"changeLanguage" object:nil];
}

- (void)changeLanguage:(NSNotification *)notify {
    self.label.text = PJLocalString(@"discoverString");
}


// navTwoViewController.mæ›´æ–°ä»¥ä¸‹æ–¹æ³•

- (void)viewDidLoad {
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor orangeColor];

    self.label = [[UILabel alloc] initWithFrame:CGRectMake(100, 100, 200, 20)];
    [self.view addSubview:self.label];
    self.label.font = [UIFont systemFontOfSize:25];
    self.label.textColor = [UIColor whiteColor];
    self.label.text = PJLocalString(@"discoverString");

    self.button = [[UIButton alloc] initWithFrame:CGRectMake(100, 300, 100, 100)];
    [self.view addSubview:self.button];
    [self.button addTarget:self action:@selector(buttonClick) forControlEvents:UIControlEventTouchUpInside];
    self.button.backgroundColor = [UIColor blueColor];
    [self.button setTitle:PJLocalString(@"change") forState:UIControlStateNormal];

    // æ–°å¢ç›‘å¬æ–¹æ³•
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(changeLanguage:) name:@"changeLanguage" object:nil];
}

- (void)changeLanguage:(NSNotification *)notify {
    self.label.text = PJLocalString(@"discoverString");
    [self.button setTitle:PJLocalString(@"change") forState:UIControlStateNormal];
}

- (void)buttonClick {
    [[NSUserDefaults standardUserDefaults] setObject:@"zh-Hans" forKey:AppLanguage];
    [[NSUserDefaults standardUserDefaults] synchronize];

    // åŒæ­¥å®ŒNSUserDefaultåï¼Œå‘é€è¯­è¨€æ›´æ”¹é€šçŸ¥
    [[NSNotificationCenter defaultCenter] postNotificationName:@"changeLanguage" object:nil];
}
```

ç¼–è¯‘è¿è¡Œå§ï¼Œè§è¯å¥‡è¿¹çš„æ—¶åˆ»åˆ°äº†~ç‚¹å‡»â€œæ›´æ”¹è¯­è¨€â€buttonï¼Œæ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯ç¬é—´å…¨éƒ½æ”¹è¿‡äº†ã€‚ã€‚ğŸ˜


ä½†æ˜¯ç°åœ¨åªå®Œæˆäº†ç¬¬ä¸€å’Œç¬¬å››ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬æ¥ç€æ¥å®Œæˆç¬¬ä¸‰ä¸ªéœ€æ±‚ï¼Œâ€œç”¨æˆ·é¦–æ¬¡æ‰“å¼€appæ—¶ï¼Œappçš„è¯­è¨€ä¸ç³»ç»Ÿè¯­è¨€ä¿æŒä¸€è‡´ï¼ˆç³»ç»Ÿè¯­è¨€ä¸ºéç®€ä½“ä¸­æ–‡ï¼Œé»˜è®¤appéƒ½æ˜¯è‹±æ–‡ï¼‰ç”¨æˆ·æ‰‹åŠ¨æ›´æ”¹è¯­è¨€ä¹‹åï¼Œä¹‹åéƒ½è®°å¿†ç”¨æˆ·é€‰æ‹©çš„è¯­è¨€â€ã€‚

åˆ†æä¸€ä¸‹ï¼Œè¯¥éœ€æ±‚çš„é‡ç‚¹åœ¨äºç”¨æˆ·ç¬¬ä¸€æ¬¡æ‰“å¼€Appæ—¶æ•´ä½“Appè¯­è¨€è®¾ç½®è·Ÿéšç³»ç»Ÿè¯­è¨€è®¾ç½®ï¼Œéç®€ä½“ä¸­æ–‡ä¹‹å¤–çš„è¯­è¨€ï¼Œéƒ½è®¾ç½®æˆè‹±æ–‡ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å¯¹`AppDelegate.m`æ–‡ä»¶è¿›è¡Œæ”¹é€ ï¼Œ

```objc

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    // Appç¬¬ä¸€æ¬¡å¯åŠ¨è·Ÿéšç³»ç»Ÿè¯­è¨€è®¾ç½®
    if(![[NSUserDefaults standardUserDefaults] boolForKey:@"firstLaunch"]){
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"firstLaunch"];
        NSArray *allLanguages = [[NSUserDefaults standardUserDefaults] objectForKey:@"AppleLanguages"];
        NSString *preferredLanguage = allLanguages[0];
        if([preferredLanguage rangeOfString:@"zh-Hans"].location != NSNotFound) {
            [[NSUserDefaults standardUserDefaults] setObject:@"zh-Hans" forKey:AppLanguage];
        } else {
            [[NSUserDefaults standardUserDefaults] setObject:@"en" forKey:AppLanguage];
        }
    }

    ........

```

æ¥ä¸‹æ¥å®Œæˆæœ€åä¸€ä¸ªéœ€æ±‚ï¼ŒæŠŠAppçš„åç§°ä¹Ÿåšå›½é™…åŒ–é€‚é…ï¼Œå¦‚æœä½ ä¹‹å‰æœ‰è¿‡åœ¨`info.plist`æ–‡ä»¶ä¸­ä¿®æ”¹è¿‡Appçš„åå­—ï¼Œæˆ‘ä»¬ç°åœ¨è¦åšçš„äº‹æƒ…åŒæ ·ä¹Ÿæ˜¯æ”¹åå­—ï¼Œè€Œä¸”æ˜¯é’ˆå¯¹`info.plist`æ•´ä¸ªæ–‡ä»¶åšå›½é™…åŒ–ï¼ŒåŒæ ·æ–°å»ºä¸€ä¸ª`string file`æ–‡ä»¶ï¼Œå‘½åä¸¥æ ¼å¡«å†™ä¸º`infoPlist.strings`ï¼Œå¹¶ä¸”åœ¨Xcodeçš„å³è¾¹æ‹“å±•æ ä¸­é€‰æ‹©`Localizable`ï¼Œç‚¹å‡»ç”ŸæˆEnglishå’ŒChinese Simplifiedå¤šè¯­è¨€æ–‡ä»¶
```objc
// åœ¨Englishä¸­å†™ä¸‹
CFBundleName = "your english name";
CFBundleDisplayName = "your english name";


// åœ¨Chinese Simplifiedä¸­å†™ä¸‹
CFBundleName = "ä½ çš„ä¸­æ–‡å";
CFBundleDisplayName = "ä½ çš„ä¸­æ–‡å";

```

OKï¼Œä»¥ä¸Šå°±æ˜¯æœ¬ç¯‡æ–‡ç« æ‰€è¦è¡¨è¾¾çš„æ‰€æœ‰å†…å®¹ï¼Œå½“ç„¶è¿™äº›éƒ½æ˜¯demoçº§åˆ«çš„codeï¼Œå¦‚æœæ­¤æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè®°å¾—å¯¹å…¶è¿›è¡Œå¤šå¤šæ”¹é€ ï¼

demoåœ°å€ï¼š
[https://github.com/windstormeye/iOSMorePractices/tree/master/languageTest](https://github.com/windstormeye/iOSMorePractices/tree/master/languageTest)

åŸæ–‡é“¾æ¥ï¼š[pjhubs.com](http://pjhubs.com/2018/04/10/More-iOS%E5%9B%BD%E9%99%85%E5%8C%96%E4%B8%80%E7%AB%99%E5%BC%8F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/)
